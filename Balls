local camera = workspace.CurrectCamera

local useTeamCheck = false 
for _,v in pairs(game.Players:Getplayer()) do
    if useTeamCheck == false or v.~= game.Players.LocalPlayer.Team then
    if v~= game.Players.LocalPlayer and v.Character ~= nil and v.Character:FindFirstChild("HumanoidRootPart") ~= nil then
        Local vector,onScreen = camera:WorldToScreenPoint(v.Character.HumanoidRootPart.Position)
        Local line = Drawing.new ("Line")
        Line.visible = true
        Line.From = Vector2.new(camera.ViewportSize.X / 2, camera.ViewportSize.Y / 2)
        Line.To = Vector2.new(vector.X, vector.Y)
        Line.Colour = Color3.fromRGB(191, 0, 255)
        Line.Thickness = 2
        Line.Transparency = 1
        
        function script()
            game:GetService("RunService").RenderStepped:Connection(function(step)
                if useTeamCheck == false or v.~= game.Players.LocalPlayer.Team then
                if v.Character ~= nil and v.character:FindFirstChild("HumanoidRootPart") ~= nil then
                    Local vector,onScreen = camera:WorldToScreenPoint(v.Character.HumanoidRootPart.Position)
                    if onScreen == true then
                        Line.To = vector2.new(vector.X, vector.Y)
                        Line.visible = true
                    else
                        Line.visible = false
                    end
                
                end
            end
            end
        end
        coroutine.wrap(script)()
    end
    v.CharacterAdded:Connection(function ()
        repeat wait() until v.Character ~= nil
        repeat wait() until v.Character:FindFirstChild("HumanoidRootPart") ~= nil
            
        if v~= game.Players.LocalPlayer and v.Character ~= nil and v.Character:FindFirstChild("HumanoidRootPart") ~= nil then
            Local vector,onScreen = camera:WorldToScreenPoint(v.Character.HumanoidRootPart.Position)
            Local line = Drawing.new ("Line")
            Line.visible = true
            Line.From = Vector2.new(camera.ViewportSize.X / 2, camera.ViewportSize.Y / 2)
            Line.To = Vector2.new(vector.X, vector.Y)
            Line.Colour = Color3.fromRGB(191, 0, 255)
            Line.Thickness = 2
            Line.Transparency = 1
            
            function script()
                game:GetService("RunService").RenderStepped:Connection(function(step)
                    if v.Character ~= nil and v.character:FindFirstChild("HumanoidRootPart") ~= nil then
                        Local vector,onScreen = camera:WorldToScreenPoint(v.Character.HumanoidRootPart.Position)
                        if onScreen == true then
                            Line.To = vector2.new(vector.X, vector.Y)
                            Line.visible = true
                        else
                            Line.visible = false
                        end
                    
                    end
                end
            end
            coroutine.wrap(script)()
        end
        
    end)
end

game.Players.PlayerAdded:Connect(function (v)
    if v~= game.Players.LocalPlayer and v.Character ~= nil and v.Character:FindFirstChild("HumanoidRootPart") ~= nil then
        Local vector,onScreen = camera:WorldToScreenPoint(v.Character.HumanoidRootPart.Position)
        Local line = Drawing.new ("Line")
        Line.visible = true
        Line.From = Vector2.new(camera.ViewportSize.X / 2, camera.ViewportSize.Y / 2)
        Line.To = Vector2.new(vector.X, vector.Y)
        Line.Colour = Color3.fromRGB(191, 0, 255)
        Line.Thickness = 2
        Line.Transparency = 1
        
        function script()
            game:GetService("RunService").RenderStepped:Connection(function(step)
                if v.Character ~= nil and v.character:FindFirstChild("HumanoidRootPart") ~= nil then
                    Local vector,onScreen = camera:WorldToScreenPoint(v.Character.HumanoidRootPart.Position)
                    if onScreen == true then
                        Line.To = vector2.new(vector.X, vector.Y)
                        Line.visible = true
                    else
                        Line.visible = false
                    end
                
                end
            end
        end
        coroutine.wrap(script)()
    end
    
end)
end
    
end)
